{% extends 'courses/base.html' %}
{% block content %}

<!-- Container for Dashboard -->
<div class="container mt-5 pt-3">
    <h2 class="text-center mt-5 mb-5">My Progress Dashboard</h2>

    <div class="row">
        {% for item in course_progress_list %}
        <div class="col-lg-4 col-md-6 col-sm-12 mb-4">
            <div class="progress-card shadow-lg rounded">
                <div class="progress-card-header bg-primary text-white text-center p-3">
                    <h4>{{ item.course.course_title }}</h4>
                </div>
                <div class="progress-card-body p-4">
                    <p><strong>Lecture Completion:</strong> {{ item.lecture_completion|floatformat:2 }}%</p>
                    <p><strong>Quiz Score:</strong> {{ item.quiz_score|floatformat:2 }}%</p>
                    <p><strong>Overall Progress:</strong> {{ item.overall_progress|floatformat:2 }}%</p>
                    
                    <!-- Progress chart -->
                    <div class="chart-container text-center">
                        <canvas id="progressChart{{ forloop.counter }}" width="300" height="300"></canvas>
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
   

</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Styling for the dashboard -->
<style>
          /* General Body and Container Styling */
        body {
            background-color: #f7f7f7;
            font-family: 'Arial', sans-serif;
        }
    
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
    
        h2 {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
        }
    
        /* Progress Card Styling */
        .progress-card {
            background-color: #fff;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: box-shadow 0.3s ease-in-out;
            border: none;
            /* Adjust the size of the card */
            max-width: 350px;  /* Set max width */
            margin: 0 auto;    /* Center align the card */
        }
    
        .progress-card:hover {
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
    
        .progress-card-header {
            background-color:rgb(121, 230, 255) !important;
            color: white;
            border-radius: 15px 15px 0 0;
            padding: 15px;
        }
    
        .progress-card-body {
            padding: 30px;
            font-size: 1rem;
            color: #555;
        }
    
        .progress-card-body p {
            font-size: 1.1rem;
            line-height: 1.6;
            color: #555;
        }
    
        /* Responsive Design */
        @media (max-width: 992px) {
            /* Adjust card size for medium screens */
            .progress-card {
                max-width: 90%;  /* Adjust the width on smaller screens */
            }
    
            .progress-card-body {
                padding: 20px;
            }
    
            .progress-card-header h4 {
                font-size: 1.5rem;
            }
    
            .progress-card-body p {
                font-size: 1rem;
            }
        }
    
        @media (max-width: 768px) {
            /* Adjust card size for smaller screens */
            .progress-card {
                max-width: 100%;
            }
    
            .progress-card-body {
                padding: 15px;
            }
    
            .progress-card-header h4 {
                font-size: 1.3rem;
            }
    
            .progress-card-body p {
                font-size: 0.95rem;
            }
        }
    
        /* Add a cute animation on page load */
        .progress-card {
            animation: fadeIn 0.8s ease-out;
        }
    
        /* Keyframe animation for fade-in effect */
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
    


<!-- Add interactivity with JavaScript -->
<script>
    {% for item in course_progress_list %}
    var ctx = document.getElementById('progressChart{{ forloop.counter }}').getContext('2d');
    var chart = new Chart(ctx, {
        type: 'doughnut',
        data: {
            labels: ['Completed', 'Remaining'],
            datasets: [{
                data: [{{ item.overall_progress }}, {{ item.remaining_progress }}],
                backgroundColor: ['#28a745', '#e0e0e0'],
            }]
        },
        options: {
            cutoutPercentage: 70,
            responsive: true,
            plugins: {
                legend: {
                    position: 'bottom',
                    labels: {
                        boxWidth: 20,
                        padding: 15,
                    }
                }
            },
            animation: {
                animateScale: true,
                animateRotate: true
            }
        }
    });
    {% endfor %}
</script>

{% endblock %}
